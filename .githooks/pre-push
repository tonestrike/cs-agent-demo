#!/bin/sh
set -e

BIOME="./node_modules/.bin/biome"
if [ ! -x "$BIOME" ]; then
  echo "biome binary not found; run bun install first." >&2
  exit 1
fi

if command -v bun >/dev/null 2>&1; then
  BUN="bun"
elif [ -x "$HOME/.bun/bin/bun" ]; then
  BUN="$HOME/.bun/bin/bun"
else
  echo "bun not found; install bun to run checks." >&2
  exit 1
fi

$BIOME check . --error-on-warnings
$BUN typecheck
